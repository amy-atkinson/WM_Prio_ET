load("data_pilot.RData")
View(d_spaced_3s)
View(d_spaced_2s)
# pilot data of 20 trials
#d_raw <- read_csv("Eye_raw_data/ET_csv_999.csv") # close-2sec
d_raw <- read_csv("Eye_raw_data/ET_csv_777.csv") # spaced-3sec/2sec
View(d_raw)
# select the columns we need from the eye data, rename them
d <-
d_raw %>%
select(device_time_stamp,
system_time_stamp,
left_gaze = left_gaze_point_on_display_area,
left_validity = left_gaze_point_validity,
right_gaze = right_gaze_point_on_display_area,
right_validity = right_gaze_point_validity,
trial,
trial_phase,
pp_TS)
# process the left and right eye data columns into separate x and y variables
d <-
d %>%
mutate(left_gaze = gsub("[()]", "", left_gaze), # remove parentheses from numbers
right_gaze = gsub("[()]", "", right_gaze)) %>%
separate(left_gaze, into = c("left_x", "left_y"), sep = ",") %>%
separate(right_gaze, into = c("right_x", "right_y"), sep = ",") %>%
mutate(across(where(is.character),as.numeric))
# get both eyes
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>% # set first timestamp to 0 and all others corrected afterwards
select(-device_time_stamp, -system_time_stamp)  %>%
mutate(left_x = case_when(left_validity == 1 ~ left_x,
left_validity == 0 ~ NA_real_), # change NaN to NA values
left_y = case_when(left_validity == 1 ~ left_y,
left_validity == 0 ~ NA_real_),
right_x = case_when(right_validity == 1 ~ right_x,
right_validity == 0 ~ NA_real_), # change NaN to NA values
right_y = case_when(right_validity == 1 ~ right_y,
right_validity == 0 ~ NA_real_)) %>%
select(time, left_x, left_y, right_x, right_y, trial, trial_phase)
View(d)
# split the file
d_spaced_3s <-
d %>%
filter(time < 2000000)
d_spaced_2s <-
d %>%
filter(time > 2000000)
save(d_spaced_2s, d_spaced_3s, file = "data_pilot.RData")
library(tidyverse)
library(eyetools) # github.com/tombeesley/eyetools
library(patchwork)
theme_set(theme_light())
#d_raw <- readRDS("data_pilot.RDS")
load("data_pilot.RData")
d_raw <- combine_eyes(d_spaced_3s,"average")
# change to screen coordinates
d <-
d_raw %>%
mutate(x = x*1920, y = y*1080)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 1, 20))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
# how many fixations per trial
fix_summary <-
f_disp %>%
group_by(trial) %>%
summarise(nFix = n(),
meanDur = mean(dur))
f_disp
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(400,1520,200,880),
show_fix_order = TRUE)
AOIs <- data.frame(x = c(840,840, 1080, 1080),
y = c(660,420, 660, 420),
width = c(50,50,50,50),
height = c(50,50,50,50))
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(400,1520,200,880),
show_fix_order = TRUE)
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(400,1520,0,1080),
show_fix_order = TRUE)
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 31, 35))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
# how many fixations per trial
fix_summary <-
f_disp %>%
group_by(trial) %>%
summarise(nFix = n(),
meanDur = mean(dur))
f_disp
# how many fixations per trial
fix_summary <-
f_disp %>%
group_by(trial) %>%
summarise(nFix = n(),
meanDur = mean(duration))
fix_summary
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 31, 31))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
(1920/2)-500
(1920/2)-500
(1920/2)+500
(1080/2)+500
(1080/2)-500
AOIs <- data.frame(x = c(460,460, 1460, 1460),
y = c(1040,40, 1040, 40),
width = c(60,60,60,60),
height = c(60,60,60,60))
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
AOIs <- data.frame(x = c(540,540, 1380, 1380),
y = c(960,120, 960, 120),
width = c(60,60,60,60),
height = c(60,60,60,60))
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 32, 32))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
# how many fixations per trial
fix_summary <-
f_disp %>%
group_by(trial) %>%
summarise(nFix = n(),
meanDur = mean(duration))
# distribution of fixation counts
nFixplot <-
fix_summary %>%
ggplot() +
geom_histogram(aes(nFix))
# distribution of fixation durations
meanDurPlot <-
fix_summary %>%
ggplot() +
geom_histogram(aes(meanDur))
nFixplot + meanDurPlot
AOIs <- data.frame(x = c(540,540, 1380, 1380),
y = c(960,120, 960, 120),
width = c(60,60,60,60),
height = c(60,60,60,60))
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
d_raw <- combine_eyes(d_spaced_2s,"average")
# change to screen coordinates
d <-
d_raw %>%
mutate(x = x*1920, y = y*1080)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 32, 32))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 1, 120))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 1, 50))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 1, 30))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_raw <- combine_eyes(d_spaced_3s,"average")
# change to screen coordinates
d <-
d_raw %>%
mutate(x = x*1920, y = y*1080)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 1, 30))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
View(f_disp)
# how many fixations per trial
fix_summary <-
f_disp %>%
group_by(trial) %>%
summarise(nFix = n(),
meanDur = mean(duration))
# distribution of fixation counts
nFixplot <-
fix_summary %>%
ggplot() +
geom_histogram(aes(nFix))
# distribution of fixation durations
meanDurPlot <-
fix_summary %>%
ggplot() +
geom_histogram(aes(meanDur))
nFixplot + meanDurPlot
d_raw <- combine_eyes(d_spaced_2s,"average")
# change to screen coordinates
d <-
d_raw %>%
mutate(x = x*1920, y = y*1080)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 1, 30))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 1, 20))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 1, 10))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 10, 20))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 10, 15))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 16, 19))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 16, 18))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 19, 19))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
View(d_s)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 20, 100))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
# how many fixations per trial
fix_summary <-
f_disp %>%
group_by(trial) %>%
summarise(nFix = n(),
meanDur = mean(duration))
# distribution of fixation counts
nFixplot <-
fix_summary %>%
ggplot() +
geom_histogram(aes(nFix))
# distribution of fixation durations
meanDurPlot <-
fix_summary %>%
ggplot() +
geom_histogram(aes(meanDur))
nFixplot + meanDurPlot
d_raw <- combine_eyes(d_spaced_3s,"average")
# change to screen coordinates
d <-
d_raw %>%
mutate(x = x*1920, y = y*1080)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 20, 100))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
# how many fixations per trial
fix_summary <-
f_disp %>%
group_by(trial) %>%
summarise(nFix = n(),
meanDur = mean(duration))
# distribution of fixation counts
nFixplot <-
fix_summary %>%
ggplot() +
geom_histogram(aes(nFix))
# distribution of fixation durations
meanDurPlot <-
fix_summary %>%
ggplot() +
geom_histogram(aes(meanDur))
nFixplot + meanDurPlot
d_raw <- combine_eyes(d_spaced_2s,"average")
# change to screen coordinates
d <-
d_raw %>%
mutate(x = x*1920, y = y*1080)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 20, 100))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
# how many fixations per trial
fix_summary <-
f_disp %>%
group_by(trial) %>%
summarise(nFix = n(),
meanDur = mean(duration))
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 35, 35))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
f_disp
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 31, 35))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
f_disp
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 32, 32))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
f_sac <-
eyetools::VTI_saccade(d_s)
#plot the fixations and raw data
spatial_plot(sac_data = f_sac,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
sac_data = f_sac,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 33, 33))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
f_sac <-
eyetools::VTI_saccade(d_s)
AOIs <- data.frame(x = c(540,540, 1380, 1380),
y = c(960,120, 960, 120),
width = c(60,60,60,60),
height = c(60,60,60,60))
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
sac_data = f_sac,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
d_s <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(between(trial, 34, 34))
# process fixations
f_disp <-
eyetools::fix_dispersion(d_s, disp_tol = 75)
f_sac <-
eyetools::VTI_saccade(d_s)
AOIs <- data.frame(x = c(540,540, 1380, 1380),
y = c(960,120, 960, 120),
width = c(60,60,60,60),
height = c(60,60,60,60))
#plot the fixations and raw data
spatial_plot(raw_data = d_s,
fix_data = f_disp,
sac_data = f_sac,
AOIs = AOIs,
res = c(0,1920,0,1080),
show_fix_order = TRUE)
