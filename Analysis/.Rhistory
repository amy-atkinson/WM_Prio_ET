validity == 1 ~99))
View(d)
# left eye is better - take that for now
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>%
select(time,
x = left_x,
y = left_y,
validity = left_validity,
trial_phase)
d %>%
mutate(x = case_when(validity == 0 ~ NA,
validity == 1 ~ 99))
d %>%
mutate(x = case_when(validity == 0 ~ NA,
time == 8 ~ 99))
d %>%
mutate(x = case_when(validity == 0 ~ NA))
d %>%
mutate(x = case_when(validity == 1 ~ NA))
d %>%
mutate(x = case_when(validity == 1 ~ 99))
d %>%
mutate(x = case_when(validity == 1 ~ x))
d %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA))
d %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_))
d %>%
mutate(across(x:y) = case_when(validity == 1 ~ .,
validity == 0 ~ NA_real_))
d %>%
mutate(across(x:y), ~ case_when(validity == 1 ~ .,
validity == 0 ~ NA_real_))
d %>%
mutate(across(x:y), ~ case_when(validity == 1 ~ .,
validity == 0 ~ NA_real_))
d %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_),
y = case_when(validity == 1 ~ y,
validity == 0 ~ NA_real_))
# left eye is better - take that for now
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>%
select(time,
x = left_x,
y = left_y,
validity = left_validity,
trial_phase)  %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_),
y = case_when(validity == 1 ~ y,
validity == 0 ~ NA_real_))
d <-
d_raw %>%
select(device_time_stamp,
system_time_stamp,
left_gaze = left_gaze_point_on_display_area,
left_validity = left_gaze_point_validity,
right_gaze = right_gaze_point_on_display_area,
right_validity = right_gaze_point_validity,
trial,
trial_phase,
pp_TS)
d <-
d %>%
mutate(left_gaze = gsub("[()]", "", left_gaze), # remove parentheses from numbers
right_gaze = gsub("[()]", "", right_gaze)) %>%
separate(left_gaze, into = c("left_x", "left_y"), sep = ",") %>%
separate(right_gaze, into = c("right_x", "right_y"), sep = ",") %>%
mutate(across(where(is.character),as.numeric))
firstTS = d$device_time_stamp[1]
# left eye is better - take that for now
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>%
select(time,
x = left_x,
y = left_y,
validity = left_validity,
trial_phase)  %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_),
y = case_when(validity == 1 ~ y,
validity == 0 ~ NA_real_))
# left eye is better - take that for now
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>%
select(time,
x = left_x,
y = left_y,
validity = left_validity,
trial_phase)  %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_),
y = case_when(validity == 1 ~ y,
validity == 0 ~ NA_real_)) %>%
select(-validity)
library(tidyverse)
library(eyetools)
d_raw <- read_csv("Raw_data/ET_csv_2420.csv")
d <-
d_raw %>%
select(device_time_stamp,
system_time_stamp,
left_gaze = left_gaze_point_on_display_area,
left_validity = left_gaze_point_validity,
right_gaze = right_gaze_point_on_display_area,
right_validity = right_gaze_point_validity,
trial,
trial_phase,
pp_TS)
d <-
d %>%
mutate(left_gaze = gsub("[()]", "", left_gaze), # remove parentheses from numbers
right_gaze = gsub("[()]", "", right_gaze)) %>%
separate(left_gaze, into = c("left_x", "left_y"), sep = ",") %>%
separate(right_gaze, into = c("right_x", "right_y"), sep = ",") %>%
mutate(across(where(is.character),as.numeric))
firstTS = d$device_time_stamp[1]
# left eye is better - take that for now
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>%
select(time,
x = left_x,
y = left_y,
validity = left_validity,
trial_phase)  %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_),
y = case_when(validity == 1 ~ y,
validity == 0 ~ NA_real_)) %>%
select(-validity)
saveRDS(d, "data_pilot")
saveRDS(d, "data_pilot.RDS")
readRDS("data_pilot.RDS")
readRDS("data_pilot.RDS")
d <- readRDS("data_pilot.RDS")
d <-
d %>%
mutate(trial == 99, .before = trial_phase)
d <-
d %>%
mutate(trial = 99, .before = trial_phase)
View(d)
count(d, trial_phase)
diff(d$trial_phase)
d <-
d %>%
mutate(change_phase = diff(trial_phase))
d <-
d %>%
mutate(change_phase = diff(trial_phase[1:end-1]))
d <-
d %>%
mutate(change_phase = diff(trial_phase[1:end-1,]))
trial_phase[1:end-1,]
diff(d$trial_phase[1:end-1,])
diff(d$trial_phase[1:end,])
diff(d$trial_phase[1:10,])
diff(d$trial_phase[1:end])
diff(d$trial_phase)
[NA diff(d$trial_phase)]
[NA, diff(d$trial_phase)]
c(NA, diff(d$trial_phase))
d <-
d %>%
mutate(change_phase = c(NA, diff(trial_phase)))
d <- readRDS("data_pilot.RDS")
d %>%
filter(trial_phase == 4)
d4 <-
d %>%
filter(trial_phase == 4)
eyetools::fix_dispersion(x)
eyetools::fix_dispersion(d4)
d <-
d %>%
mutate(trial = 99, .before = trial_phase)
d4 <-
d %>%
filter(trial_phase == 4) %>%
select(-trial_phase)
eyetools::fix_dispersion(d4)
d5 <-
d %>%
filter(trial_phase == 5) %>%
select(-trial_phase)
eyetools::fix_dispersion(d5)
fix5 <-
eyetools::fix_dispersion(d5)
spatial_plot(raw_data = d5, fix_data = fix5)
d <-
d %>%
mutate(x = x*1920, y = y*1080) %>%
mutate(trial = 99, .before = trial_phase)
d5 <-
d %>%
filter(trial_phase == 5) %>%
select(-trial_phase)
fix5 <-
eyetools::fix_dispersion(d5)
spatial_plot(raw_data = d5, fix_data = fix5)
spatial_plot(raw_data = d5, fix_data = fix5, res = [1920, 1080])
spatial_plot(raw_data = d5, fix_data = fix5, res = c(1920, 1080))
spatial_plot(raw_data = d5, fix_data = fix5, res = c(0,1920,0,1080))
spatial_plot(raw_data = d5, fix_data = fix5, res = c(0,1920,0,1080), show_fix_order = FALSE)
library(tidyverse)
library(eyetools)
# pilot data of 20 trials
d_raw <- read_csv("Raw_data/ET_csv_1007.csv")
d <-
d_raw %>%
select(device_time_stamp,
system_time_stamp,
left_gaze = left_gaze_point_on_display_area,
left_validity = left_gaze_point_validity,
right_gaze = right_gaze_point_on_display_area,
right_validity = right_gaze_point_validity,
trial,
trial_phase,
pp_TS)
d <-
d %>%
mutate(left_gaze = gsub("[()]", "", left_gaze), # remove parentheses from numbers
right_gaze = gsub("[()]", "", right_gaze)) %>%
separate(left_gaze, into = c("left_x", "left_y"), sep = ",") %>%
separate(right_gaze, into = c("right_x", "right_y"), sep = ",") %>%
mutate(across(where(is.character),as.numeric))
firstTS = d$device_time_stamp[1]
# left eye is better - take that for now
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>%
select(time,
x = left_x,
y = left_y,
validity = left_validity,
trial_phase)  %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_),
y = case_when(validity == 1 ~ y,
validity == 0 ~ NA_real_)) %>%
select(-validity)
saveRDS(d, "data_pilot.RDS")
View(d)
library(tidyverse)
library(eyetools)
# pilot data of 20 trials
d_raw <- read_csv("Raw_data/ET_csv_1007.csv")
d <-
d_raw %>%
select(device_time_stamp,
system_time_stamp,
left_gaze = left_gaze_point_on_display_area,
left_validity = left_gaze_point_validity,
right_gaze = right_gaze_point_on_display_area,
right_validity = right_gaze_point_validity,
trial,
trial_phase,
pp_TS)
d <-
d %>%
mutate(left_gaze = gsub("[()]", "", left_gaze), # remove parentheses from numbers
right_gaze = gsub("[()]", "", right_gaze)) %>%
separate(left_gaze, into = c("left_x", "left_y"), sep = ",") %>%
separate(right_gaze, into = c("right_x", "right_y"), sep = ",") %>%
mutate(across(where(is.character),as.numeric))
View(d_raw)
# pilot data of 20 trials
d_raw <- read_csv("Raw_data/ET_csv_5224.csv")
d <-
d_raw %>%
select(device_time_stamp,
system_time_stamp,
left_gaze = left_gaze_point_on_display_area,
left_validity = left_gaze_point_validity,
right_gaze = right_gaze_point_on_display_area,
right_validity = right_gaze_point_validity,
trial,
trial_phase,
pp_TS)
d <-
d %>%
mutate(left_gaze = gsub("[()]", "", left_gaze), # remove parentheses from numbers
right_gaze = gsub("[()]", "", right_gaze)) %>%
separate(left_gaze, into = c("left_x", "left_y"), sep = ",") %>%
separate(right_gaze, into = c("right_x", "right_y"), sep = ",") %>%
mutate(across(where(is.character),as.numeric))
firstTS = d$device_time_stamp[1]
# left eye is better - take that for now
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>% # set first timestamp to 0 and all others corrected afterwards
select(time,
x = left_x,
y = left_y,
validity = left_validity,
trial_phase)  %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_),
y = case_when(validity == 1 ~ y,
validity == 0 ~ NA_real_)) %>%
select(-validity)
d <-
d_raw %>%
select(device_time_stamp,
system_time_stamp,
left_gaze = left_gaze_point_on_display_area,
left_validity = left_gaze_point_validity,
right_gaze = right_gaze_point_on_display_area,
right_validity = right_gaze_point_validity,
trial,
trial_phase,
pp_TS)
d <-
d %>%
mutate(left_gaze = gsub("[()]", "", left_gaze), # remove parentheses from numbers
right_gaze = gsub("[()]", "", right_gaze)) %>%
separate(left_gaze, into = c("left_x", "left_y"), sep = ",") %>%
separate(right_gaze, into = c("right_x", "right_y"), sep = ",") %>%
mutate(across(where(is.character),as.numeric))
# left eye is better - take that for now
d <-
d %>%
mutate(time = round((device_time_stamp - device_time_stamp[1])/1000)) %>% # set first timestamp to 0 and all others corrected afterwards
select(time,
x = left_x,
y = left_y,
validity = left_validity,
trial,
trial_phase)  %>%
mutate(x = case_when(validity == 1 ~ x,
validity == 0 ~ NA_real_),
y = case_when(validity == 1 ~ y,
validity == 0 ~ NA_real_)) %>%
select(-validity)
saveRDS(d, "data_pilot.RDS")
library(tidyverse)
library(eyetools)
d <- readRDS("data_pilot.RDS")
d <-
d %>%
mutate(x = x*1920, y = y*1080)
d5 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase)
fix5 <-
eyetools::fix_dispersion(d5)
spatial_plot(raw_data = d5, fix_data = fix5, res = c(0,1920,0,1080), show_fix_order = FALSE)
spatial_plot(raw_data = d5, fix_data = fix5, res = c(760,1160,0,1080), show_fix_order = FALSE)
spatial_plot(raw_data = d5, fix_data = fix5, res = c(760,1160,340,740), show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(trial == 10)
fix5 <-
eyetools::fix_dispersion(d5)
spatial_plot(raw_data = d5, fix_data = fix5, res = c(760,1160,340,740), show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(trial == 10)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7, fix_data = fix7, res = c(760,1160,340,740), show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7, fix_data = fix7, res = c(760,1160,340,740), show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 5) %>%
select(-trial_phase)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7, fix_data = fix7, res = c(760,1160,340,740), show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 9) %>%
select(-trial_phase)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7, fix_data = fix7, res = c(760,1160,340,740), show_fix_order = FALSE)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(560,1360,240,840),
show_fix_order = FALSE)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(0,1920,0,1080),
show_fix_order = FALSE)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(300,1620,100,980),
show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 3) %>%
select(-trial_phase)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(300,1620,100,980),
show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(300,1620,100,980),
show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(trial == 1)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(300,1620,100,980),
show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(trial == 2)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(300,1620,100,980),
show_fix_order = FALSE)
fix7
d %>%
filter(trial_phase == 7)
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(trial == 2)
231*8.33
241*8.33
fix7 <-
eyetools::fix_dispersion(d7)
fix7 <-
eyetools::fix_dispersion(d7)
fix7
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(trial == 3)
#fix7 <-
eyetools::fix_dispersion(d7)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase)
#fix7 <-
eyetools::fix_dispersion(d7)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(trial == 18)
#fix7 <-
eyetools::fix_dispersion(d7)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(300,1620,100,980),
show_fix_order = FALSE)
d7 <-
d %>%
filter(trial_phase == 7) %>%
select(-trial_phase) %>%
filter(trial == 18)
fix7 <-
eyetools::fix_dispersion(d7)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(300,1620,100,980),
show_fix_order = FALSE)
spatial_plot(raw_data = d7,
fix_data = fix7,
res = c(0,1920,0,1080),
show_fix_order = FALSE)
d <- readRDS("data_pilot.RDS")
View(d)
